<!-- recognition.component.html -->
<div class="recognition-container">
  <div class="recognition-header">
    <h2>История поиска по фотографиям</h2>
    <button class="upload-btn" (click)="showModal = true">Загрузить фотоматериалы</button>
  </div>

  <table class="data-table">
    <thead>
      <tr>
        <th>№</th>
        <th>Дата загрузки</th>
        <th>Фото</th>
        <th>Адрес</th>
        <th>Координаты</th>
        <th>Статус</th>
        <th>Выбрать</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of data">
        <td>{{ row.id }}</td>
        <td>{{ row.date }}</td>
        <td>{{ row.photo_url || 'img' }}</td>
        <td>{{ row.address || '—' }}</td>
        <td>
          <a [routerLink]="['/map']" [queryParams]="{ lat: row.lat, lon: row.lot }">
            {{ row.lat }}{{ row.lat && row.lot ? ', ' : '' }}{{ row.lot }}
          </a>
        </td>
        <td>{{ row.status }}</td>
        <td><input type="checkbox" [(ngModel)]="row.selected" /></td>
      </tr>
    </tbody>
  </table>

  <div class="table-footer">
    <div class="pagination">
      <button class="page-btn active">1</button>
      <button class="page-btn">2</button>
      <button class="page-btn">3</button>
    </div>
    <a class="map-link" [routerLink]="['/map']" [queryParams]="firstSelectedQuery()">Отобразить на карте</a>
  </div>
</div>

<app-upload-modal
  *ngIf="showModal"
  (close)="showModal = false"
  (uploaded)="handleFile($event)">
</app-upload-modal>
